\chapter{\IfLanguageName{dutch}{Proof of Concept}{Proof of Concept}}%
\label{ch:PoC}

Dit deel van het onderzoek presenteert een Proof of Concept gericht op welk framework er gebruikt zal worden om machine learning pipelines lokaal uit te voeren, en dat gebruikt kan worden in het opleidingsonderdeel Machine Learning Operations.
Het doel van deze Proof of Concept is om de efficiÃ«ntie en bruikbaarheid van deze frameworks te onderzoeken aan de hand van een lokale opstelling met de gekozen frameworks. Hierbij zullen de uitvoeringen van het framework, alsook de resultaten en bevindingen besproken worden.
Hierna wordt aan de hand van de resultaten een conclusie getrokken over het gekozen framework.

% TODO: misschien ook vermelden voor welke frameworks je een PoC hebt uitgewerkt?

\section{Vereisten}

% TODO: beschrijf ook de specs van jouw pc, de software-versie, eventuele configuratie en installatie-stappen (of verwijs naar documentatie).

Voordat we kunnen beginnen met het uitwerken van de volgende Proof of Concepts is bepaalde software nodig nodig op het systeem. De vereiste software omvat:

\begin{itemize}
    \item Python\footnote{\url{https://www.python.org/downloads/}}
    \item De package manager \texttt{pip}\footnote{\url{https://pip.pypa.io/en/stable/installation/}}
\end{itemize}

Deze vereisten zorgen ervoor dat de code uit de volgende secties zonder problemen werkt. Als hardwarevereisten is het voldoende om te voldoen aan de minimale vereisten van de opleiding Toegepaste Informatica\footnote{\url{https://www.hogent.be/opleidingen/bachelors/toegepaste-informatica/computervereisten/}}. De Proof of Concept zal ook geen configuratiebestanden wijzigen voor de lokale opstelling. Elk framework wordt met de standaardinstellingen uitgevoerd.

\section{Ontwikkeling van de Machine Learning pipeline}
% TODO: ik lees vaan "in dit onderdeel", "in dit deel", dat leest moeizaam

% TODO: ik zie "Machine Learning pipeline" en "machine learning pipeline", doe eens Ctrl+F en vervang alle "Machine Learning pipeline" "machine learning pipeline"

Deze sectie bespreekt de opbouw van de Machine Learning pipeline wordt besproken zodat duidelijk is hoe de pipeline uit de proof of concepts functioneert. De Machine Learning pipeline die gebruikt zal worden, is identiek aan de pipeline uit opdracht 3 van het opleidingsonderdeel Machine Learning Operations.

Deze pipeline is ontworpen om aan de hand van \textit{Image Classification} het verschil te kunnen herkennen tussen foto's van sinaasappels en appels. Deze pipeline heeft verschillende onderdelen:

\begin{itemize}
    \item \textbf{Preprocessing:} downloaden en verwerken van de afbeeldingen
    \item \textbf{Training:} trainen van het model
    \item \textbf{Evaluatie:} evalueren van het moel
\end{itemize}

De volgende secties zullen elk van deze onderdelen toelichten en de werking ervan uitleggen. De hele pipeline wordt visueel voorgesteld op Figuur~\ref{fig:Model_Flow}.

\begin{figure}
    \centering
    \includegraphics[width=0.9\linewidth]{graphics/Model_Diagram.PNG}
    \caption[Visuele voorstelling pipeline PoC]{Visuele voorstelling van de Machine Learning pipeline uit opdracht 3 van Machine Learning Operations}
    \label{fig:Model_Flow}
\end{figure}


\subsection{Preprocessing}

Het preprocessinggedeelte van de pipeline bereidt de afbeeldingen  zodat deze afbeeldingen gebruikt kunnen worden als invoer voor het trainen van het model. Dit omvat het downloaden en transformeren van de afbeeldingen. In deze Proof of Concept wordt gebruik gemaakt van de Tensorflow \texttt{ImageDataGenerator} om afbeeldingen in te laden, te normaliseren en te voorzien van labels gebaseerd op de mappenstructuur. Na het inladen en het klaarmaken van de afbeeldingen worden de afbeeldingen gesplitst in trainings-, validatie- en testsets. In elke van deze sets worden de juiste labels voorzien.

\subsection{Training}

Het trainingsgedeelte gaat daadwerkelijk een Machine Learning-model trainen. Deze Proof of Concept zal gebruikmaken van een Convolutional Neural Network (CNN) met behulp van Keras. Dit model bevat verschillende lagen en parameters. Er wordt gebruikgemaakt van een sequentieel model van Keras, wat betekent dat alle lagen achtereenvolgens worden uitgevoerd. De volgorde en de lagen die gebruikt worden voor dit Proof of Concept zijn als volgt:

\begin{itemize}
    \item Convolutionele laag (\texttt{Conv2D})
    \item Activatielaag (\texttt{Activation})
    \item Flatten-laag
    \item Dense-laag
\end{itemize}

\subsection{Evaluatie}

Het evaluatiegedeelte zal het getrainde model evalueren. Alle resultaten worden bijgehouden met behulp van MLFlow. De resultaten bevatten:

\begin{itemize}
    \item Parameters van het model
    \item Systeemeigenschappen en performantie
    \item Accuraatheid van het model en de evaluatie
\end{itemize}

\section{Packages}

Deze Proof of Concept maakt gebruik van verschillende packages om de Machine Learning pipeline te ontwikkelen. Deze packages zijn grotendeels dezelfde voor elke Proof of Concept, maar kunnen extra packages hebben in verband met het gekozen framework. Deze sectie behandelt alle packages die gedeeld zijn over alle Proof of Concepts.

De basispackages die gebruikt zullen worden in alle Proof of Concepts zijn:

\begin{itemize}
    \item \textbf{os:} Voor het maken van mappen voor de verschillende datasets die worden gebruikt tijdens de training en de evaluatie van het model.
    \item \textbf{Requests:} Voor het maken van HTTP-verzoeken om de nodige afbeeldingen te kunnen downloaden.
    \item \textbf{Tensorflow:} Voor het trainen en evalueren van het model, Tensorflow werkt hiervoor samen met Keras.
    \item \textbf{Keras:} Voor het maken van het model bestaande uit verschillende lagen.
    \item \textbf{MLFlow:} Voor het bijhouden van alle resultaten van het model, het trainingsproces en de evaluatie.
\end{itemize}

% TODO: plaats een link in een voetnoot naar de GitHub-repository van deze PoC: \footnote{\url{...}} + is het niet simpelweg de repo van de BP?

In de GitHub-repository van deze Proof of Concept zal voor elk framework een bestand genaamd \texttt{requirements\_framework.txt} te vinden zijn, waarbij `framework' de naam is van het gebruikte framework. Dit bestand kan samen met \texttt{pip} gebruikt worden om alle packages te installeren:

\begin{minted}[breaklines]{bash}
pip install -r "requirements_framework.txt"
\end{minted}

\subsection{Virtuele omgeving}

De volgende secties zullen gebruikmaken van verschillende frameworks. Deze frameworks hebben allemaal de mogelijkheid om lokaal een Machine Learning pipeline uit te voeren en voldoen ook aan alle must haves uit de requirementsanalyse (zie Sectie~\ref{s:Requirementsanalyse}).

% TODO: moet venv dan niet bij de basispackages staan?
% TODO: leg ook uit hoe je venv gebruikt

Voor elk gebruikt framework wordt een virtuele omgeving opgesteld. Dit zorgt ervoor dat er geen conflicten zijn tussen de verschillende versies van de libraries.

\input{pocs/mlflow.tex}
\input{pocs/prefect.tex}
\input{pocs/zenml.tex}
\input{pocs/dagster.tex}
